language: smalltalk

os:
    - linux

smalltalk:
    - Pharo-6.1

install:
    # Pillar installation
    - git clone https://github.com/pillar-markup/pillar.git .pillar -b dev-7  # Clone pillar
    - cd .pillar && ./scripts/build.sh && cd ..

script:
    - .pillar/build/pillar build html
    - cd _result/html && touch .nojekyll && cd ..

# script:
# - if [[ ${TRAVIS_BRANCH} == "master" ]]; then make deploy; fi

deploy:
   provider: pages
   skip-cleanup: true
   github-token: $GH_TOKEN
   keep-history: true
   local_dir: _result/html
   on:
     branch: master

# env:
#  global:
#    secure: FUFtoL6loStG+jyW4NFavwCqMvGHBmguVNmyMsj5H01pEj1idEzc08BSJmAgdUD8E7iU2Tt82h/p+I7V1gGtkvDq9GR5JIY34zrlvVqmzK39k4oeh4ToW/uIGfW0R3zJvptAIYBLiQEUbToUaLOkbdTgpQMrakOFoVaZ67Cm0iv1JrNnLlK/K3F0hIbxiFVec/#1uO07ZYAfukYMydjayuPHQ1mTRH+0PUePImzgtXrCGZqt2T3v1dYRBHArcyf3RzzF017RxATAHkI/hTS6Njqwxb4olsvLKIyc8IvIwLDrIvMs/k7ZY59zGnZq8G3afjjrcDAHIZLbwC8aAgnudpLCzgCGCVSqBLb8KyQQT48lxuPgM1QjwmXmDpd8QMRXhNnB4zHVRncTk17H7NNQPwAMST/#ow948XaDXap3HGgfTCnOFsNJqwUkdgizpsnMUnM+SzuW8MqR9/Eg+5tLZ6K7vfgvn5WoBOBsb6uOWC7eG3/+DA58NdyUDi0mlvAvzorgJr9jVsVbc7e8/9ReXZo0CkHtu1ZN07ivNyDfC0NY1vzU0+JkW6GLF/hgRMOjqm9waqhY9P/#jbQS9/5HzialRAZ+HU7SBcGJ2eBGnKu6UajGfl54Vt+4Cvds+mBcf2ThA+9YZ1SOjcBCD1F5mSw2xpvdqIr6d9ZajBFWqnpG3Q=
